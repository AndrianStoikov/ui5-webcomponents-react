import{l as x,W as R,T,F as I,m as L,n as X}from"./DomRefTable.module-6076c75b.js";import{r as g,R as d}from"./index-ebeaab24.js";import{Z as z,H as B,u as G,c as m}from"./index-a20a0404.js";import{t as V}from"./throttle-6f27c407.js";import"./jsx-runtime-5926aa06.js";import"./chunk-PCJTTTQV-0876ad95.js";import"./iframe-e0c5cf8c.js";import"../sb-preview/runtime.js";import"./client-d4c2b4b3.js";import"./index-9c09ad76.js";import"./index-d475d2ea.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./inheritsLoose-93e09647.js";import"./_baseForOwn-800a0312.js";import"./mapValues-2c1e4f64.js";import"./_getPrototype-593546d2.js";import"./_baseUniq-4c215180.js";import"./index-356e4a49.js";import"./react-jss.esm-022ab528.js";import"./index-bfca69ed.js";import"./UI5Element-2e105c8a.js";import"./CustomElementsScopeUtils-137da8c8.js";import"./withWebComponent-7b9bd1ee.js";import"./utils-69f7a0e0.js";import"./useIsomorphicLayoutEffect-38a48652.js";import"./slot-76e48863.js";import"./Icon-1927e688.js";import"./Icons-fe8ad928.js";import"./decline-76de6b04.js";import"./i18n-defaults-80781f7e.js";import"./information-bc6b0940.js";import"./class-map-6a9bd920.js";import"./Button-a741ea37.js";import"./AriaLabelHelper-43a261ec.js";import"./MarkedEvents-b83081e9.js";import"./Device-208919c6.js";import"./i18n-defaults-2f9956dc.js";var W=x.div({position:"relative",maxWidth:250}),F=x(R)({position:"absolute",zIndex:1,top:4,left:4}),M=x.div({width:200,margin:5,".react-colorful__saturation":{borderRadius:"4px 4px 0 0"},".react-colorful__hue":{boxShadow:"inset 0 0 0 1px rgb(0 0 0 / 5%)"},".react-colorful__last-control":{borderRadius:"0 0 4px 4px"}}),N=x(T)(({theme:e})=>({fontFamily:e.typography.fonts.base})),A=x.div({display:"grid",gridTemplateColumns:"repeat(9, 16px)",gap:6,padding:3,marginTop:5,width:200}),j=x.div(({theme:e,active:t})=>({width:16,height:16,boxShadow:t?`${e.appBorderColor} 0 0 0 1px inset, ${e.textMutedColor}50 0 0 0 4px`:`${e.appBorderColor} 0 0 0 1px inset`,borderRadius:e.appBorderRadius})),Z=`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,S=({value:e,active:t,onClick:o,style:l,...r})=>{let s=`linear-gradient(${e}, ${e}), ${Z}, linear-gradient(#fff, #fff)`;return d.createElement(j,{...r,active:t,onClick:o,style:{...l,backgroundImage:s}})},q=x(I.Input)(({theme:e})=>({width:"100%",paddingLeft:30,paddingRight:30,boxSizing:"border-box",fontFamily:e.typography.fonts.base})),D=x(L)(({theme:e})=>({position:"absolute",zIndex:1,top:6,right:7,width:20,height:20,padding:4,boxSizing:"border-box",cursor:"pointer",color:e.input.color})),_=(e=>(e.RGB="rgb",e.HSL="hsl",e.HEX="hex",e))(_||{}),w=Object.values(_),J=/\(([0-9]+),\s*([0-9]+)%?,\s*([0-9]+)%?,?\s*([0-9.]+)?\)/,K=/^\s*rgba?\(([0-9]+),\s*([0-9]+),\s*([0-9]+),?\s*([0-9.]+)?\)\s*$/i,Q=/^\s*hsla?\(([0-9]+),\s*([0-9]+)%,\s*([0-9]+)%,?\s*([0-9.]+)?\)\s*$/i,k=/^\s*#?([0-9a-f]{3}|[0-9a-f]{6})\s*$/i,U=/^\s*#?([0-9a-f]{3})\s*$/i,Y={hex:z,rgb:B,hsl:G},y={hex:"transparent",rgb:"rgba(0, 0, 0, 0)",hsl:"hsla(0, 0%, 0%, 0)"},v=e=>{let t=e==null?void 0:e.match(J);if(!t)return[0,0,0,1];let[,o,l,r,s=1]=t;return[o,l,r,s].map(Number)},f=e=>{if(!e)return;let t=!0;if(K.test(e)){let[p,a,h,c]=v(e),[b,n,i]=m.rgb.hsl([p,a,h])||[0,0,0];return{valid:t,value:e,keyword:m.rgb.keyword([p,a,h]),colorSpace:"rgb",rgb:e,hsl:`hsla(${b}, ${n}%, ${i}%, ${c})`,hex:`#${m.rgb.hex([p,a,h]).toLowerCase()}`}}if(Q.test(e)){let[p,a,h,c]=v(e),[b,n,i]=m.hsl.rgb([p,a,h])||[0,0,0];return{valid:t,value:e,keyword:m.hsl.keyword([p,a,h]),colorSpace:"hsl",rgb:`rgba(${b}, ${n}, ${i}, ${c})`,hsl:e,hex:`#${m.hsl.hex([p,a,h]).toLowerCase()}`}}let o=e.replace("#",""),l=m.keyword.rgb(o)||m.hex.rgb(o),r=m.rgb.hsl(l),s=e;if(/[^#a-f0-9]/i.test(e)?s=o:k.test(e)&&(s=`#${o}`),s.startsWith("#"))t=k.test(s);else try{m.keyword.hex(s)}catch{t=!1}return{valid:t,value:s,keyword:m.rgb.keyword(l),colorSpace:"hex",rgb:`rgba(${l[0]}, ${l[1]}, ${l[2]}, 1)`,hsl:`hsla(${r[0]}, ${r[1]}%, ${r[2]}%, 1)`,hex:s}},ee=(e,t,o)=>{if(!e||!(t!=null&&t.valid))return y[o];if(o!=="hex")return(t==null?void 0:t[o])||y[o];if(!t.hex.startsWith("#"))try{return`#${m.keyword.hex(t.hex)}`}catch{return y.hex}let l=t.hex.match(U);if(!l)return k.test(t.hex)?t.hex:y.hex;let[r,s,p]=l[1].split("");return`#${r}${r}${s}${s}${p}${p}`},te=(e,t)=>{let[o,l]=g.useState(e||""),[r,s]=g.useState(()=>f(o)),[p,a]=g.useState((r==null?void 0:r.colorSpace)||"hex");g.useEffect(()=>{let n=e||"",i=f(n);l(n),s(i),a((i==null?void 0:i.colorSpace)||"hex")},[e]);let h=g.useMemo(()=>ee(o,r,p).toLowerCase(),[o,r,p]),c=g.useCallback(n=>{let i=f(n),$=(i==null?void 0:i.value)||n||"";l($),$===""&&(s(void 0),t(void 0)),i&&(s(i),a(i.colorSpace),t(i.value))},[t]),b=g.useCallback(()=>{let n=w.indexOf(p)+1;n>=w.length&&(n=0),a(w[n]);let i=(r==null?void 0:r[w[n]])||"";l(i),t(i)},[r,p,t]);return{value:o,realValue:h,updateValue:c,color:r,colorSpace:p,cycleColorSpace:b}},E=e=>e.replace(/\s*/,"").toLowerCase(),re=(e,t,o)=>{let[l,r]=g.useState(t!=null&&t.valid?[t]:[]);g.useEffect(()=>{t===void 0&&r([])},[t]);let s=g.useMemo(()=>(e||[]).map(a=>typeof a=="string"?f(a):a.title?{...f(a.color),keyword:a.title}:f(a.color)).concat(l).filter(Boolean).slice(-27),[e,l]),p=g.useCallback(a=>{a!=null&&a.valid&&(s.some(h=>E(h[o])===E(a[o]))||r(h=>h.concat(a)))},[o,s]);return{presets:s,addPreset:p}},ae=({name:e,value:t,onChange:o,onFocus:l,onBlur:r,presetColors:s,startOpen:p=!1})=>{let a=g.useCallback(V(o,200),[o]),{value:h,realValue:c,updateValue:b,color:n,colorSpace:i,cycleColorSpace:$}=te(t,a),{presets:C,addPreset:P}=re(s,n,i),H=Y[i];return d.createElement(W,null,d.createElement(F,{startOpen:p,closeOnOutsideClick:!0,onVisibleChange:()=>P(n),tooltip:d.createElement(M,null,d.createElement(H,{color:c==="transparent"?"#000000":c,onChange:b,onFocus:l,onBlur:r}),C.length>0&&d.createElement(A,null,C.map((u,O)=>d.createElement(R,{key:`${u.value}-${O}`,hasChrome:!1,tooltip:d.createElement(N,{note:u.keyword||u.value})},d.createElement(S,{value:u[i],active:n&&E(u[i])===E(n[i]),onClick:()=>b(u.value)})))))},d.createElement(S,{value:c,style:{margin:4}})),d.createElement(q,{id:X(e),value:h,onChange:u=>b(u.target.value),onFocus:u=>u.target.select(),placeholder:"Choose color..."}),h?d.createElement(D,{icon:"markup",onClick:$}):null)},Fe=ae;export{ae as ColorControl,Fe as default};
//# sourceMappingURL=Color-3YIJY6X7-cf263a56.js.map
