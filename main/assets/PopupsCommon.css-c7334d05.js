import{e as F,l as f,s as g,a as b,p,c as $,b as I}from"./withWebComponent-e4481254.js";import{l as O,a as u,n as T,o as M,U as D,p as z}from"./UI5Element-427ec721.js";import{e as d}from"./i18n-defaults-da1c0a37.js";import{s as A,g as C}from"./AriaLabelHelper-c82262ef.js";import{b as H}from"./Device-208919c6.js";import{g as k,a as U}from"./FocusableElements-7e25663e.js";import{g as V}from"./BrowserScrollbar.css-615afd63.js";import{d as G,e as X,b as Z}from"./Keys-3acbae73.js";import{g as j}from"./CustomElementsScopeUtils-137da8c8.js";import{g as W}from"./Integer-d9976c13.js";import{R as x}from"./ResizeHandler-1fa8a094.js";import{M as P}from"./MediaRange-25b98f31.js";import{s as v}from"./style-map-77d201d2.js";import{o as R}from"./class-map-5d8e4b2b.js";var w;(function(e){e.None="None",e.Dialog="Dialog",e.AlertDialog="AlertDialog"})(w||(w={}));const m=w,Pe=(e,o,t)=>Math.min(Math.max(e,o),t),E=O("PopupUtilsData",{currentZIndex:100}),L=()=>{const e=W();return e&&typeof e.focus=="function"?e:null},q=e=>{const o=L();return o?S(e,o):!1},S=(e,o)=>{let t=e;if(t.shadowRoot&&(t=Array.from(t.shadowRoot.children).find(l=>l.localName!=="style"),!t))return!1;if(t===o)return!0;const s=t.localName==="slot"?t.assignedNodes():t.children;return s?Array.from(s).some(n=>S(n,o)):!1},Y=(e,o,t)=>e>=t.left&&e<=t.right&&o>=t.top&&o<=t.bottom,Re=(e,o)=>{let t,s;if(e instanceof MouseEvent)t=e.clientX,s=e.clientY;else{const n=e.touches[0];t=n.clientX,s=n.clientY}return Y(t,s,o)};function J(e){return"isUI5Element"in e&&"_show"in e}const K=e=>{const o=e.parentElement||e.getRootNode&&e.getRootNode().host;return o&&(J(o)||o===document.documentElement)?o:K(o)},Q=()=>{const e=j("OpenUI5Support");return e&&e.isLoaded()?e.getNextZIndex():(E.currentZIndex+=2,E.currentZIndex)},ee=(e,o,t)=>F`<section style="${v(e.styles.root)}" class="${R(e.classes.root)}" role="${f(e._role)}" aria-modal="${f(e._ariaModal)}" aria-label="${f(e._ariaLabel)}" aria-labelledby="${f(e._ariaLabelledBy)}" @keydown=${e._onkeydown} @focusout=${e._onfocusout} @mouseup=${e._onmouseup} @mousedown=${e._onmousedown}><span class="first-fe" data-ui5-focus-trap tabindex="0" @focusin=${e.forwardToLast}></span><div style="${v(e.styles.content)}" class="${R(e.classes.content)}"  @scroll="${e._scroll}" part="content"><slot></slot></div><span class="last-fe" data-ui5-focus-trap tabindex="0" @focusin=${e.forwardToFirst}></span></section> `,oe=(e,o,t)=>F`<div class="ui5-block-layer" ?hidden=${e._blockLayerHidden} tabindex="0" style="${v(e.styles.blockLayer)}" @keydown="${e._preventBlockLayerFocus}" @mousedown="${e._preventBlockLayerFocus}"></div>`;let a=[];const te=(e,o=[])=>{a.some(t=>t.instance===e)||a.push({instance:e,parentPopovers:o}),B(),a.length===1&&ie()},se=e=>{a=a.filter(o=>o.instance!==e),B(),a.length||re()},Ee=()=>[...a],N=e=>{a.length&&G(e)&&a[a.length-1].instance.close(!0)},ie=()=>{document.addEventListener("keydown",N)},re=()=>{document.removeEventListener("keydown",N)},B=()=>{let e,o=!1;for(let t=a.length-1;t>=0;t--)e=a[t].instance,!o&&e.isModal?(e.isTopModalPopup=!0,o=!0):e.isTopModalPopup=!1};u("@ui5/webcomponents-theming","sap_fiori_3",async()=>g);u("@ui5/webcomponents","sap_fiori_3",async()=>b);const ae={packageName:"@ui5/webcomponents",fileName:"themes/Popup.css.ts",content:":host{min-width:1px;display:none;position:fixed}"};u("@ui5/webcomponents-theming","sap_fiori_3",async()=>g);u("@ui5/webcomponents","sap_fiori_3",async()=>b);const ne={packageName:"@ui5/webcomponents",fileName:"themes/PopupStaticAreaStyles.css.ts",content:".ui5-block-layer{display:none;position:fixed;background-color:var(--sapBlockLayer_Background);opacity:.6;top:-500px;left:-500px;right:-500px;bottom:-500px;outline:none;pointer-events:all;z-index:-1}.ui5-block-layer:not([hidden]){display:inline-block}"};u("@ui5/webcomponents-theming","sap_fiori_3",async()=>g);u("@ui5/webcomponents","sap_fiori_3",async()=>b);const pe={packageName:"@ui5/webcomponents",fileName:"themes/PopupGlobal.css.ts",content:".ui5-popup-scroll-blocker{overflow:hidden}"};var r=globalThis&&globalThis.__decorate||function(e,o,t,s){var n=arguments.length,l=n<3?o:s===null?s=Object.getOwnPropertyDescriptor(o,t):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,o,t,s);else for(var y=e.length-1;y>=0;y--)(h=e[y])&&(l=(n<3?h(l):n>3?h(o,t,l):h(o,t))||l);return n>3&&l&&Object.defineProperty(o,t,l),l},c;const le=()=>{T("data-ui5-popup-scroll-blocker")||M(pe,"data-ui5-popup-scroll-blocker")};le();const _=new Set;let i=c=class extends D{constructor(){super(),this._resizeHandler=this._resize.bind(this)}onBeforeRendering(){this._blockLayerHidden=!this.isOpen()||!this.isTopModalPopup}onEnterDOM(){x.register(this,this._resizeHandler)}onExitDOM(){this.isOpen()&&(c.unblockPageScrolling(this),this._removeOpenedPopup()),x.deregister(this,this._resizeHandler)}get _displayProp(){return"block"}_resize(){this.mediaRange=P.getCurrentRange(P.RANGESETS.RANGE_4STEPS,this.getDomRef().offsetWidth)}_preventBlockLayerFocus(o){o.preventDefault()}static blockPageScrolling(o){_.add(o),_.size===1&&document.documentElement.classList.add("ui5-popup-scroll-blocker")}static unblockPageScrolling(o){_.delete(o),_.size===0&&document.documentElement.classList.remove("ui5-popup-scroll-blocker")}_scroll(o){this.fireEvent("scroll",{scrollTop:o.target.scrollTop,targetRef:o.target})}_onkeydown(o){const t=o.target===this._root&&X(o),s=Z(o)&&!this.isOpen();(t||s)&&o.preventDefault()}_onfocusout(o){o.relatedTarget||(this._shouldFocusRoot=!0)}_onmousedown(o){this._root.removeAttribute("tabindex"),this.shadowRoot.contains(o.target)?this._shouldFocusRoot=!0:this._shouldFocusRoot=!1}_onmouseup(){this._root.tabIndex=-1,this._shouldFocusRoot&&(H()&&this._root.focus(),this._shouldFocusRoot=!1)}async forwardToFirst(){const o=await k(this);o?o.focus({focusVisible:!0}):this._root.focus()}async forwardToLast(){const o=await U(this);o?o.focus({focusVisible:!0}):this._root.focus()}async applyInitialFocus(){await this.applyFocus()}async applyFocus(){await this._waitForDomRef();const o=this.getRootNode().getElementById(this.initialFocus)||document.getElementById(this.initialFocus)||await k(this)||this._root;o&&(o===this._root&&(o.tabIndex=-1),o.focus({focusVisible:!0}))}isOpen(){return this.opened}isFocusWithin(){return q(this._root)}async _open(o){var s;this.fireEvent("before-open",{},!0,!1)&&(this.isModal&&!this.shouldHideBackdrop&&(this.getStaticAreaItemDomRef(),this._blockLayerHidden=!1,c.blockPageScrolling(this)),this._zIndex=Q(),this.style.zIndex=((s=this._zIndex)==null?void 0:s.toString())||"",this._focusedElementBeforeOpen=L(),this._show(),!this._disableInitialFocus&&!o&&this.applyInitialFocus(),this._addOpenedPopup(),this.opened=!0,this.open=!0,await z(),this.fireEvent("after-open",{},!1,!1))}_addOpenedPopup(){te(this)}close(o=!1,t=!1,s=!1){!this.opened||!this.fireEvent("before-close",{escPressed:o},!0,!1)||(this.isModal&&(this._blockLayerHidden=!0,c.unblockPageScrolling(this)),this.hide(),this.opened=!1,this.open=!1,t||this._removeOpenedPopup(),!this.preventFocusRestore&&!s&&this.resetFocus(),this.fireEvent("after-close",{},!1,!1))}_removeOpenedPopup(){se(this)}resetFocus(){this._focusedElementBeforeOpen&&(this._focusedElementBeforeOpen.focus({focusVisible:!0}),this._focusedElementBeforeOpen=null)}_show(){this.style.display=this._displayProp}hide(){this.style.display="none"}get _ariaLabel(){return C(this)}get _root(){return this.shadowRoot.querySelector(".ui5-popup-root")}get _role(){return this.accessibleRole===m.None?void 0:this.accessibleRole.toLowerCase()}get _ariaModal(){return this.accessibleRole===m.None?void 0:"true"}get contentDOM(){return this.shadowRoot.querySelector(".ui5-popup-content")}get styles(){return{root:{},content:{},blockLayer:{zIndex:this._zIndex?this._zIndex-1:""}}}get classes(){return{root:{"ui5-popup-root":!0,"ui5-content-native-scrollbars":V()},content:{"ui5-popup-content":!0}}}};r([p()],i.prototype,"initialFocus",void 0);r([p({type:Boolean})],i.prototype,"preventFocusRestore",void 0);r([p({type:Boolean})],i.prototype,"open",void 0);r([p({type:Boolean,noAttribute:!0})],i.prototype,"opened",void 0);r([p({defaultValue:void 0})],i.prototype,"accessibleName",void 0);r([p({defaultValue:""})],i.prototype,"accessibleNameRef",void 0);r([p({type:m,defaultValue:m.Dialog})],i.prototype,"accessibleRole",void 0);r([p()],i.prototype,"mediaRange",void 0);r([p({type:Boolean})],i.prototype,"_disableInitialFocus",void 0);r([p({type:Boolean})],i.prototype,"_blockLayerHidden",void 0);r([p({type:Boolean,noAttribute:!0})],i.prototype,"isTopModalPopup",void 0);r([A({type:HTMLElement,default:!0})],i.prototype,"content",void 0);i=c=r([$({renderer:I,styles:ae,template:ee,staticAreaTemplate:oe,staticAreaStyles:ne}),d("before-open"),d("after-open"),d("before-close",{escPressed:{type:Boolean}}),d("after-close"),d("scroll")],i);const Le=i;u("@ui5/webcomponents-theming","sap_fiori_3",async()=>g);u("@ui5/webcomponents","sap_fiori_3",async()=>b);const Se={packageName:"@ui5/webcomponents",fileName:"themes/PopupsCommon.css.ts",content:':host{display:none;position:fixed;background:var(--sapGroup_ContentBackground);box-shadow:var(--sapContent_Shadow2);border-radius:var(--_ui5_popup_border_radius);min-height:2rem;box-sizing:border-box}.ui5-popup-root{background:inherit;border-radius:inherit;width:100%;height:100%;box-sizing:border-box;display:flex;flex-direction:column;overflow:hidden;outline:none}.ui5-popup-root .ui5-popup-header-root{color:var(--sapPageHeader_TextColor);box-shadow:var(--sapContent_HeaderShadow);margin-bottom:.125rem}.ui5-popup-content{color:var(--sapTextColor)}.ui5-popup-footer-root{background:var(--sapPageFooter_Background);border-top:1px solid var(--sapPageFooter_BorderColor);color:var(--sapPageFooter_TextColor)}.ui5-popup-footer-root,.ui5-popup-header-root,:host([header-text]) .ui5-popup-header-text{margin:0;font-size:1rem;font-family:"72override",var(--_ui5_popup_header_font_family);display:flex;justify-content:center;align-items:center}.ui5-popup-header-root .ui5-popup-header-text{font-weight:var(--_ui5_popup_header_font_weight)}.ui5-popup-content{overflow:auto;box-sizing:border-box}:host([header-text]) .ui5-popup-header-text{text-align:center;min-height:var(--_ui5_popup_default_header_height);max-height:var(--_ui5_popup_default_header_height);line-height:var(--_ui5_popup_default_header_height);text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:100%;display:inline-block}:host([header-text]) .ui5-popup-header-root{justify-content:var(--_ui5_popup_header_prop_header_text_alignment)}:host(:not([header-text])) .ui5-popup-header-text{display:none}:host([disable-scrolling]) .ui5-popup-content{overflow:hidden}:host([media-range=S]) .ui5-popup-content{padding:1rem var(--_ui5_popup_content_padding_s)}:host([media-range=L]) .ui5-popup-content,:host([media-range=M]) .ui5-popup-content{padding:1rem var(--_ui5_popup_content_padding_m_l)}:host([media-range=XL]) .ui5-popup-content{padding:1rem var(--_ui5_popup_content_padding_xl)}.ui5-popup-header-root{background:var(--sapPageHeader_Background)}:host([media-range=S]) .ui5-popup-footer-root,:host([media-range=S]) .ui5-popup-header-root{padding-left:var(--_ui5_popup_header_footer_padding_s);padding-right:var(--_ui5_popup_header_footer_padding_s)}:host([media-range=L]) .ui5-popup-footer-root,:host([media-range=L]) .ui5-popup-header-root,:host([media-range=M]) .ui5-popup-footer-root,:host([media-range=M]) .ui5-popup-header-root{padding-left:var(--_ui5_popup_header_footer_padding_m_l);padding-right:var(--_ui5_popup_header_footer_padding_m_l)}:host([media-range=XL]) .ui5-popup-footer-root,:host([media-range=XL]) .ui5-popup-header-root{padding-left:var(--_ui5_popup_header_footer_padding_xl);padding-right:var(--_ui5_popup_header_footer_padding_xl)}'};export{m as P,te as a,Le as b,K as c,Pe as d,Q as e,Ee as g,Re as i,se as r,Se as s};
//# sourceMappingURL=PopupsCommon.css-c7334d05.js.map
