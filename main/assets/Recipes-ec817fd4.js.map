{"version":3,"file":"Recipes-ec817fd4.js","sources":["../../packages/main/src/components/AnalyticalTable/Recipes.mdx"],"sourcesContent":["import { TableOfContent } from '@sb/components';\nimport { Meta } from '@storybook/blocks';\nimport { MessageStrip } from '../../webComponents/index';\n\n<Meta title=\"Data Display / AnalyticalTable / Recipes\" />\n\n# AnalyticalTable Recipes\n\n<TableOfContent />\n\n## How to add your own plugin hooks?\n\nThe `AnalyticalTable` internally uses all plugin hooks of the [react-table](https://github.com/tannerlinsley/react-table) except for `usePagination` and hooks that change the layout.\nIf you pass a `react-table` hook to the `tableHooks` prop of the `AnalyticalTable` you will most likely experience some side effects or even break the table completely. We therefore strongly recommend to just not do it ;).\nIf you encounter a functionality that should be available with `react-table` hooks, but isn't in the `AnalyticalTable` please open an issue in github or write us in Slack.\n\n<MessageStrip\n  type=\"Warning\"\n  hideCloseButton\n  children={`Plugin hooks can manipulate the internal table instance. Please use with caution!`}\n/>\n\nFor adding custom plugin hooks you can use the following code snippet.\n\n```jsx\nexport const TableWithCustomHook = (props) => {\n  const { data, columns } = props;\n  const customHook = (hooks) => {\n    hooks.useInstance.push((instance) => {\n      console.log(instance);\n    });\n  };\n  return <AnalyticalTable data={data} columns={columns} tableHooks={[customHook]} />;\n};\n```\n\nWith the `customHook` callback you can plugin in all available hooks. Please note that some hooks need a return value (e.g. `columns`) which is then always the first parameter of the function, and others are not allowed to return a value (e.g. `useTable`).\nFor further details please refer to the [`react-table` documentation](https://react-table-v7.tanstack.com/docs/api/overview).\n\n## How to select rows containing active elements?\n\nWe've restricted the propagation of `click` events of UI5 Web Components elements such as `Button`, `Link`, `Switch`, etc.\nIn case you still want to select the row when clicking the respective element, you can \"mark\" the event to allow such behavior. <br />\nExample: `<Link onClick={(e) => {e.markerAllowTableRowSelection = true;}>My Link Text</Link>`\n\nFor other elements or components, we recommend disabling event propagation by setting `event.stopPropagation()` on the respective event. Per default, propagation is not prevented!\n\n## How to stop the table state from automatically resetting when the data changes?\n\nBy default, the `AnalyticalTable` will reset the sorters, filters, grouping, selected rows, etc. when the table data changes. It will also reset all manually resized columns if the container width changes.\nIn case you want to keep the current state of the Table, you can disable this behavior by using the `reactTableOptions` prop or for column resize the `retainColumnWidth` prop.\n\n```jsx\nconst [data, setData] = React.useState([])\nconst skipPageResetRef = React.useRef(false)\n\nconst updateData = newData => {\n  // When data gets updated with this function, set a flag\n  // to disable all of the auto resetting\n  skipPageResetRef.current = true\n\n  setData(newData)\n}\n\nReact.useEffect(() => {\n  // After the table has updated, always remove the flag\n  skipPageResetRef.current = false\n})\n<AnalyticalTable\n  columns={columns}\n  data={data}\n  // disable auto reset of columns width if a column has been manually resized\n  retainColumnWidth\n  // react-table options\n  reactTableOptions={{\n    // ... any other options you want to set\n    autoResetHiddenColumns: !skipPageResetRef.current,\n    autoResetPage: !skipPageResetRef.current,\n    autoResetExpanded: !skipPageResetRef.current,\n    autoResetGroupBy: !skipPageResetRef.current,\n    autoResetSelectedRows: !skipPageResetRef.current,\n    autoResetSortBy: !skipPageResetRef.current,\n    autoResetFilters: !skipPageResetRef.current,\n    autoResetRowState: !skipPageResetRef.current,\n    autoResetResize: !skipPageResetRef.current\n  }}\n/>\n```\n\nFor more details on this behavior you can double check the [react-table docs](https://react-table-v7.tanstack.com/docs/faq#how-do-i-stop-my-table-state-from-automatically-resetting-when-my-data-changes).\n\n## How to scroll to a specific row/offset?\n\nThe DOM instance of the `AnalyticalTable` exposes methods for scrolling to a specific index or offset. (You can access the DOM element e.g. by creating a Ref `ref={analyticalTableRef}`)\n\n- `scrollTo: (offset: number, align?: 'start' | 'center' | 'end' | 'auto') => void`\n- `scrollToItem: (index: number, align?: 'start' | 'center' | 'end' | 'auto') => void`\n- `horizontalScrollTo: (offset: number, align?: 'start' | 'center' | 'end' | 'auto') => void`\n- `horizontalScrollToItem: (index: number, align?: 'start' | 'center' | 'end' | 'auto') => void`\n\n`offset` is measured in `px` and `index` in rows. `align` places the item/offset at the corresponding position of the visible scroll area (`'auto'` brings the item/offset into the visible scroll area either at the start or end, depending on which is closer). The default value for `align` is `'start'`.\n\n## How to manually sort, filter or group the table?\n\nFor e.g. server side sorting, filtering or grouping, the default behavior of the table can be prevented. When setting the following `reactTableOption` the event is still fired and the indicator still set, but the internal data stays the same.\nIf you wish to implement your own data manipulation outside the table you can use:\n\n```jsx\n<AnalyticalTable\n  ...\n  reactTableOptions={{\n    manualSortBy: true,\n    manualFilters: true,\n    manualGroupBy: true\n  }}\n/>\n```\n\nFor more information please take a look at the [React Table v7 docs](https://react-table-v7.tanstack.com/docs/api/overview).\n\n## How to distinguish between `onRowClick` and `onRowSelect` on selection-cell click?\n\nWhen a selectable cell of the table is clicked, both `onRowClick` and `onRowSelect` are fired. Sometimes, but especially when the selection behavior is set to `RowSelector`, you don't want `onRowClick` to execute the logic you defined in your handler when clicking the selection-cell.\nTo achieve this, you can check the `target` inside the `onRowClick` handler for the `data-selection-cell` attribute contained in the [dataset](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dataset) and only execute your logic if this property is falsy.\n\n```js\n// both events are fired if the clicked cell is selectable\nconst onRowClick = (e) => {\n  if (!e.target.dataset.selectionCell) {\n    // only do something if other cells than the selection cell are clicked\n  }\n};\nconst onRowSelect = (e) => {\n  // do something on row select\n};\n```\n\n## How to hide columns?\n\n[React Table v7](https://react-table-v7.tanstack.com/docs/api/useTable) exposes an API on the table instance to hide columns. You can leverage it for example by attaching a React Ref to the `tableInstance` prop.\nPlease note that the internal react-table is resetting its hidden state after hiding the column, which is most probably a bug. To prevent this you can set the `autoResetHiddenColumns` table option to `false`. (See [here](https://sap.github.io/ui5-webcomponents-react/?path=/docs/data-display-analyticaltable--default-story#how-to-stop-the-table-state-from-automatically-resetting-when-the-data-changes))\n\n```jsx\n  <Button\n    onClick={() => {\n      tableInstanceRef.current.toggleHideColumn(\"age\");\n    }}\n  >\n    Toggle Age Col\n  </Button>\n  <AnalyticalTable\n    columns={COLUMNS}\n    data={DATA}\n    tableInstance={tableInstanceRef}\n    reactTableOptions={{\n      autoResetHiddenColumns: false\n    }}\n  />\n```\n"],"names":["MDXContent","props","MDXLayout","_provideComponents","_jsx","_createMdxContent","_components","_jsxs","_Fragment","Meta","TableOfContent","MessageStrip"],"mappings":"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"}