import{e as b,l as T,d as V,a as D,p as u,c as F}from"./withWebComponent-34dd487e.js";import{s as L}from"./AriaLabelHelper-dee23f38.js";import{D as G,a as j,r as R,g as X,i as Y,P as q,b as K,c as U,d as S,e as O,I as C}from"./Integer-5fa4beea.js";import{o as E,i as Z}from"./class-map-60f59e95.js";import{s as M}from"./style-map-63946e4f.js";import{r as $}from"./UI5Element-386cb3f6.js";var k;(function(o){o.Center="Center",o.Left="Left",o.Right="Right",o.Stretch="Stretch"})(k||(k={}));const f=k;var B;(function(o){o.Left="Left",o.Right="Right",o.Top="Top",o.Bottom="Bottom"})(B||(B={}));const n=B;var I;(function(o){o.Center="Center",o.Top="Top",o.Bottom="Bottom",o.Stretch="Stretch"})(I||(I={}));const v=I;class J extends G{static isValid(t){return typeof t=="string"||t instanceof HTMLElement}static propertyToAttribute(t){return t instanceof HTMLElement?null:t}}let x;const Q=300,d=[],P=()=>{d.forEach(o=>{o.instance.reposition()})},z=()=>{document.activeElement.tagName==="IFRAME"&&pt().reverse().forEach(o=>o.instance.close(!1,!1,!0))},tt=()=>{x=setInterval(()=>{P(),z()},Q)},et=()=>{clearInterval(x)},ot=()=>{document.body.addEventListener("scroll",P,{capture:!0})},rt=()=>{document.body.removeEventListener("scroll",P,{capture:!0})},it=o=>{o&&o.shadowRoot.addEventListener("scroll",P,{capture:!0})},st=o=>{o&&o.shadowRoot.removeEventListener("scroll",P,{capture:!0})},at=()=>{document.addEventListener("mousedown",H)},nt=()=>{document.removeEventListener("mousedown",H)},H=o=>{const t=X();if(!(t.length===0||!N(t[t.length-1].instance)))for(let r=t.length-1;r!==-1;r--){const i=t[r].instance;if(i.isModal||i.isOpenerClicked(o))return;if(Y(o,i.getBoundingClientRect()))break;i.close()}},lt=o=>{const t=dt(o);j(o,t),d.push({instance:o,parentPopovers:t}),it(o),d.length===1&&(ot(),at(),tt())},ht=o=>{const t=[o];for(let e=0;e<d.length;e++){const r=d[e].parentPopovers.indexOf(o);d[e].parentPopovers.length>0&&r>-1&&t.push(d[e].instance)}for(let e=t.length-1;e>=0;e--)for(let r=0;r<d.length;r++){let i=-1;t[e]===d[r].instance&&(i=r),i>=0&&(R(d[i].instance),st(d[i].instance),d.splice(i,1)[0].instance.close(!1,!0))}d.length||(rt(),nt(),et())},pt=()=>d,dt=o=>{let t=o.parentNode;const e=[];for(;t&&t.parentNode;){for(let r=0;r<d.length;r++)t===d[r].instance&&e.push(t);t=t.parentNode}return e},ut=(o,t,e)=>b`<section style="${M(o.styles.root)}" class="${E(o.classes.root)}" role="${T(o._role)}" aria-modal="${T(o._ariaModal)}" aria-label="${T(o._ariaLabel)}" aria-labelledby="${T(o._ariaLabelledBy)}" @keydown=${o._onkeydown} @focusout=${o._onfocusout} @mouseup=${o._onmouseup} @mousedown=${o._onmousedown}><span class="first-fe" data-ui5-focus-trap tabindex="0" @focusin=${o.forwardToLast}></span><span class="ui5-popover-arrow" style="${M(o.styles.arrow)}"></span>${o._displayHeader?ct(o):void 0}<div style="${M(o.styles.content)}" class="${E(o.classes.content)}"  @scroll="${o._scroll}" part="content"><slot></slot></div>${o._displayFooter?gt(o):void 0}<span class="last-fe" data-ui5-focus-trap tabindex="0" @focusin=${o.forwardToFirst}></span></section> `,ct=(o,t,e)=>b`<header class="ui5-popup-header-root" id="ui5-popup-header" part="header">${o.header.length?ft():mt(o)}</header>`,ft=(o,t,e)=>b`<slot name="header"></slot>`,mt=(o,t,e)=>b`<h1 class="ui5-popup-header-text">${T(o.headerText)}</h1>`,gt=(o,t,e)=>b`${o.footer.length?wt():void 0}`,wt=(o,t,e)=>b`<footer class="ui5-popup-footer-root" part="footer"><slot name="footer"></slot></footer>`;$("@ui5/webcomponents-theming","sap_fiori_3",()=>V);$("@ui5/webcomponents","sap_fiori_3",()=>D);const _t={packageName:"@ui5/webcomponents",fileName:"themes/Popover.css",content:'.ui5-popover-arrow{pointer-events:none;display:block;width:1rem;height:1rem;position:absolute;overflow:hidden}.ui5-popover-arrow:after{content:"";display:block;width:.7rem;height:.7rem;background-color:var(--sapGroup_ContentBackground);box-shadow:var(--sapContent_Shadow3);transform:rotate(-45deg)}:host{max-width:calc(100% - var(--_ui5_popup_viewport_margin)*2)}:host([opened][actual-placement-type=Top]){margin-top:var(--_ui5-popover-margin-bottom)}:host([opened][actual-placement-type=Bottom]){margin-top:var(--_ui5-popover-margin-top)}:host([actual-placement-type=Bottom]) .ui5-popover-arrow{left:calc(50% - .5625rem);top:-.5rem;height:.5625rem}:host([actual-placement-type=Bottom]) .ui5-popover-arrow:after{margin:var(--_ui5_popover_upward_arrow_margin)}:host([actual-placement-type=Left]) .ui5-popover-arrow{top:calc(50% - .5625rem);right:-.5625rem;width:.5625rem}:host([actual-placement-type=Left]) .ui5-popover-arrow:after{margin:var(--_ui5_popover_right_arrow_margin)}:host([actual-placement-type=Top]) .ui5-popover-arrow{left:calc(50% - .5625rem);height:.5625rem;top:100%}:host([actual-placement-type=Top]) .ui5-popover-arrow:after{margin:var(--_ui5_popover_downward_arrow_margin)}:host(:not([actual-placement-type])) .ui5-popover-arrow,:host([actual-placement-type=Right]) .ui5-popover-arrow{left:-.5625rem;top:calc(50% - .5625rem);width:.5625rem;height:1rem}:host(:not([actual-placement-type])) .ui5-popover-arrow:after,:host([actual-placement-type=Right]) .ui5-popover-arrow:after{margin:var(--_ui5_popover_left_arrow_margin)}:host([hide-arrow]) .ui5-popover-arrow{display:none}.ui5-popover-root{min-width:6.25rem}'};var h=globalThis&&globalThis.__decorate||function(o,t,e,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,t,e,r);else for(var p=o.length-1;p>=0;p--)(a=o[p])&&(s=(i<3?a(s):i>3?a(t,e,s):a(t,e))||s);return i>3&&s&&Object.defineProperty(t,e,s),s},_;const A=8;let l=_=class extends q{constructor(){super()}static get styles(){return[K,U,_t]}static get template(){return ut}static get VIEWPORT_MARGIN(){return 10}onAfterRendering(){if(!this.isOpen()&&this.open){let t;if(this.opener instanceof HTMLElement?t=this.opener:typeof this.opener=="string"&&(t=this.getRootNode().getElementById(this.opener)),!t){console.warn("Valid opener id is required.");return}this.showAt(t)}else this.isOpen()&&!this.open&&this.close()}isOpenerClicked(t){const e=t.target;if(e===this._opener)return!0;const r=e;return r.getFocusDomRef&&r.getFocusDomRef()===this._opener?!0:t.composedPath().indexOf(this._opener)>-1}async showAt(t,e=!1){!t||this.opened||(this._opener=t,this._openerRect=t.getBoundingClientRect(),await super._open(e))}_addOpenedPopup(){lt(this)}_removeOpenedPopup(){ht(this)}shouldCloseDueToOverflow(t,e){const i={Right:e.right,Left:e.left,Top:e.top,Bottom:e.bottom},s=S(this._opener);let a=!1,p=!1;if(s.showAt){const c=s.contentDOM.getBoundingClientRect();a=e.top>c.top+c.height,p=e.top+e.height<c.top}return i[t]<0||i[t]+32>s.innerHeight||a||p}shouldCloseDueToNoOpener(t){return t.top===0&&t.bottom===0&&t.left===0&&t.right===0}isOpenerOutsideViewport(t){return t.bottom<0||t.top>window.innerHeight||t.right<0||t.left>window.innerWidth}_resize(){super._resize(),this.opened&&this.reposition()}reposition(){this._show()}_show(){let t;const e=this.getPopoverSize();if(e.width===0||e.height===0)return;this.isOpen()&&(this._openerRect=this._opener.getBoundingClientRect()),this.shouldCloseDueToNoOpener(this._openerRect)&&this.isFocusWithin()?t=this._oldPlacement:t=this.calcPlacement(this._openerRect,e);const r=this.horizontalAlign===f.Stretch;if(this._preventRepositionAndClose||this.isOpenerOutsideViewport(this._openerRect))return this.close();this._oldPlacement=t,this.actualPlacementType=t.placementType;let i=O(this._left,_.VIEWPORT_MARGIN,document.documentElement.clientWidth-e.width-_.VIEWPORT_MARGIN);this.actualPlacementType===n.Right&&(i=Math.max(i,this._left));let s=O(this._top,_.VIEWPORT_MARGIN,document.documentElement.clientHeight-e.height-_.VIEWPORT_MARGIN);this.actualPlacementType===n.Bottom&&(s=Math.max(s,this._top)),this.arrowTranslateX=t.arrow.x,this.arrowTranslateY=t.arrow.y,s=this._adjustForIOSKeyboard(s),Object.assign(this.style,{top:`${s}px`,left:`${i}px`}),super._show(),r&&this._width&&(this.style.width=this._width)}_adjustForIOSKeyboard(t){if(!Z())return t;const e=Math.ceil(this.getBoundingClientRect().top);return t+(Number.parseInt(this.style.top||"0")-e)}getPopoverSize(){this.opened||Object.assign(this.style,{display:"block",top:"-10000px",left:"-10000px"});const t=this.getBoundingClientRect(),e=t.width,r=t.height;return{width:e,height:r}}get arrowDOM(){return this.shadowRoot.querySelector(".ui5-popover-arrow")}calcPlacement(t,e){let r=0,i=0;const s=this.allowTargetOverlap,a=document.documentElement.clientWidth,p=document.documentElement.clientHeight;let c=p,m=a;const g=this.getActualPlacementType(t,e);this._preventRepositionAndClose=this.shouldCloseDueToNoOpener(t)||this.shouldCloseDueToOverflow(g,t);const y=g===n.Top||g===n.Bottom;this.horizontalAlign===f.Stretch&&y?(e.width=t.width,this._width=`${t.width}px`):this.verticalAlign===v.Stretch&&!y&&(e.height=t.height);const w=this.hideArrow?0:A;switch(g){case n.Top:r=this.getVerticalLeft(t,e),i=Math.max(t.top-e.height-w,0),s||(c=t.top-w);break;case n.Bottom:r=this.getVerticalLeft(t,e),i=t.bottom+w,s?i=Math.max(Math.min(i,p-e.height),0):c=p-t.bottom-w;break;case n.Left:r=Math.max(t.left-e.width-w,0),i=this.getHorizontalTop(t,e),s||(m=t.left-w);break;case n.Right:r=t.left+t.width+w,i=this.getHorizontalTop(t,e),s?r=Math.max(Math.min(r,a-e.width),0):m=a-t.right-w;break}y?e.width>a||r<0?r=0:r+e.width>a&&(r-=r+e.width-a):e.height>p||i<0?i=0:i+e.height>p&&(i-=i+e.height-p),this._maxHeight=Math.round(c-_.VIEWPORT_MARGIN),this._maxWidth=Math.round(m-_.VIEWPORT_MARGIN),(this._left===void 0||Math.abs(this._left-r)>1.5)&&(this._left=Math.round(r)),(this._top===void 0||Math.abs(this._top-i)>1.5)&&(this._top=Math.round(i));const W=Number.parseInt(window.getComputedStyle(this).getPropertyValue("border-radius"));return{arrow:this.getArrowPosition(t,e,r,i,y,W),top:this._top,left:this._left,placementType:g}}getArrowPosition(t,e,r,i,s,a){let p=this.horizontalAlign===f.Center||this.horizontalAlign===f.Stretch;this.horizontalAlign===f.Right&&r<=t.left&&(p=!0),this.horizontalAlign===f.Left&&r+e.width>=t.left+t.width&&(p=!0);let c=0;s&&p&&(c=t.left+t.width/2-r-e.width/2);let m=0;s||(m=t.top+t.height/2-i-e.height/2);const g=e.height/2-a-A/2;m=O(m,-g,g);const y=e.width/2-a-A/2;return c=O(c,-y,y),{x:Math.round(c),y:Math.round(m)}}fallbackPlacement(t,e,r,i){if(r.left>i.width)return n.Left;if(t-r.right>r.left)return n.Right;if(e-r.bottom>i.height)return n.Bottom;if(e-r.bottom<r.top)return n.Top}getActualPlacementType(t,e){const r=this.placementType;let i=r;const s=document.documentElement.clientWidth,a=document.documentElement.clientHeight;switch(r){case n.Top:t.top<e.height&&t.top<a-t.bottom&&(i=n.Bottom);break;case n.Bottom:a-t.bottom<e.height&&a-t.bottom<t.top&&(i=n.Top);break;case n.Left:t.left<e.width&&(i=this.fallbackPlacement(s,a,t,e)||r);break;case n.Right:s-t.right<e.width&&(i=this.fallbackPlacement(s,a,t,e)||r);break}return i}getVerticalLeft(t,e){let r;switch(this.horizontalAlign){case f.Center:case f.Stretch:r=t.left-(e.width-t.width)/2;break;case f.Left:r=t.left;break;case f.Right:r=t.right-e.width;break}return r}getHorizontalTop(t,e){let r;switch(this.verticalAlign){case v.Center:case v.Stretch:r=t.top-(e.height-t.height)/2;break;case v.Top:r=t.top;break;case v.Bottom:r=t.bottom-e.height;break}return r}get isModal(){return this.modal}get shouldHideBackdrop(){return this.hideBackdrop}get _ariaLabelledBy(){if(!this._ariaLabel&&this._displayHeader)return"ui5-popup-header"}get _ariaModal(){return"true"}get styles(){return{...super.styles,root:{"max-height":this._maxHeight?`${this._maxHeight}px`:"","max-width":this._maxWidth?`${this._maxWidth}px`:""},arrow:{transform:`translate(${this.arrowTranslateX}px, ${this.arrowTranslateY}px)`}}}get classes(){const t=super.classes;return t.root["ui5-popover-root"]=!0,t}get _displayHeader(){return!!(this.header.length||this.headerText)}get _displayFooter(){return!0}};h([u()],l.prototype,"headerText",void 0);h([u({type:n,defaultValue:n.Right})],l.prototype,"placementType",void 0);h([u({type:f,defaultValue:f.Center})],l.prototype,"horizontalAlign",void 0);h([u({type:v,defaultValue:v.Center})],l.prototype,"verticalAlign",void 0);h([u({type:Boolean})],l.prototype,"modal",void 0);h([u({type:Boolean})],l.prototype,"hideBackdrop",void 0);h([u({type:Boolean})],l.prototype,"hideArrow",void 0);h([u({type:Boolean})],l.prototype,"allowTargetOverlap",void 0);h([u({validator:J})],l.prototype,"opener",void 0);h([u({type:Boolean})],l.prototype,"disableScrolling",void 0);h([u({validator:C,defaultValue:0,noAttribute:!0})],l.prototype,"arrowTranslateX",void 0);h([u({validator:C,defaultValue:0,noAttribute:!0})],l.prototype,"arrowTranslateY",void 0);h([u({type:n,defaultValue:n.Right})],l.prototype,"actualPlacementType",void 0);h([u({validator:C,noAttribute:!0})],l.prototype,"_maxHeight",void 0);h([u({validator:C,noAttribute:!0})],l.prototype,"_maxWidth",void 0);h([L({type:HTMLElement})],l.prototype,"header",void 0);h([L({type:HTMLElement})],l.prototype,"footer",void 0);l=_=h([F("ui5-popover")],l);const N=o=>"showAt"in o;l.define();const yt=l,kt=Object.freeze(Object.defineProperty({__proto__:null,default:yt,instanceOfPopover:N},Symbol.toStringTag,{value:"Module"}));export{J as D,n as P,f as a,v as b,yt as c,kt as d};
//# sourceMappingURL=Popover-ff8f156e.js.map
